{% extends 'base.html' %}
{% load static %}

{% block title %}Search Results - {{ query }}{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/search_results.css' %}">
{% endblock %}

{% block content %}
<div class="search-container">
    <div class="search-header">
        <h2>Search Results</h2>
        <a href="{% url 'ordering' %}" class="btn-back">
            <i class="bi bi-arrow-left"></i> Back to Orders
        </a>
    </div>

    {% if query %}
        <div class="search-details">
            <h5>Search results for: "<strong>{{ query }}</strong>"</h5>
        </div>
    {% endif %}

    {% if orders %}
        <div class="results-grid">
            {% for order in orders %}
            <div class="order-card">
                <div class="order-card-body">
                    <div class="order-card-header">
                        <h6 class="order-card-title">
                            {{ order.first_name }} {{ order.last_name }}
                        </h6>
                        {% if order.job_finished %}
                            <span class="status-badge status-complete">Complete</span>
                        {% else %}
                            <span class="status-badge status-progress">In Progress</span>
                        {% endif %}
                    </div>
                    <div class="order-card-details">
                        <div class="detail-row">
                            <strong>Sale #:</strong> {{ order.sale_number }}
                        </div>
                        <div class="detail-row">
                            <strong>Customer #:</strong> {{ order.customer_number }}
                        </div>
                        <div class="detail-row">
                            <strong>Order Date:</strong> {{ order.order_date|date:"d/m/Y"|default:"-" }}
                        </div>
                    </div>
                    <div class="order-card-actions">
                        <a href="{% url 'order_details' order.id %}" class="btn-view-details">
                            <i class="bi bi-arrow-right-circle"></i> View Details
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        {% if query %}
            <div class="alert-box alert-info">
                <i class="bi bi-info-circle"></i> 
                <div>
                    <strong>No orders found matching "{{ query }}".</strong>
                    <br><small>Try searching by customer name, sale number, or customer number.</small>
                </div>
            </div>
        {% else %}
            <div class="alert-box alert-info">
                <i class="bi bi-search"></i> 
                <div>Enter a search term to find orders.</div>
            </div>
        {% endif %}
    {% endif %}
</div>
{% endblock %}